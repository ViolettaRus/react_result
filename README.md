# Приложение для заметок (Notes App)

## Цель проекта

Это учебный проект, созданный для демонстрации навыков разработки на React с TypeScript. Приложение представляет собой полнофункциональную систему управления заметками с авторизацией пользователей, WYSIWYG-редактором и возможностью работы в офлайн-режиме (PWA).

Проект демонстрирует:
- Работу с современным стеком React + TypeScript + Vite
- Использование Context API для управления состоянием
- Интеграцию Material UI для создания современного интерфейса
- Работу с IndexedDB через библиотеку Dexie
- Реализацию PWA для офлайн-работы
- Использование WYSIWYG-редактора для форматирования текста

## Решаемые задачи и функциональные требования

### Основные функции:

1. **Система авторизации**
   - Регистрация новых пользователей
   - Вход в систему
   - Защита маршрутов (только авторизованные пользователи могут видеть заметки)
   - Сохранение сессии пользователя

2. **Управление заметками**
   - Создание новых заметок
   - Просмотр заметок с форматированием
   - Редактирование заметок в WYSIWYG-редакторе
   - Автоматическое сохранение изменений (через 1 секунду после последнего редактирования)
   - Удаление заметок с подтверждением

3. **Поиск по заметкам**
   - Поиск по частичному вхождению в заголовок и содержимое
   - Фильтрация в реальном времени

4. **WYSIWYG-редактор**
   - Форматирование текста: жирный, курсив, подчеркивание, зачеркивание
   - Выравнивание текста (влево, по центру, вправо)
   - Создание маркированных и нумерованных списков
   - Изменение цвета текста
   - Визуальное отображение форматирования без видимых символов разметки

5. **PWA (Progressive Web App)**
   - Работа в офлайн-режиме
   - Кэширование ресурсов
   - Установка на устройство

## Структура репозитория

```
src/
├── components/          # React компоненты
│   ├── Login.tsx        # Компонент страницы авторизации
│   ├── NotesApp.tsx     # Главный компонент приложения
│   ├── Sidebar.tsx      # Боковая панель со списком заметок
│   ├── ListItem.tsx     # Элемент списка заметок
│   ├── SearchBox.tsx    # Компонент поиска
│   ├── Workspace.tsx    # Область просмотра/редактирования заметки
│   └── TiptapEditor.tsx # WYSIWYG-редактор на базе Tiptap
│
├── contexts/            # React Context для управления состоянием
│   ├── AuthContext.tsx  # Контекст авторизации (логин, регистрация, выход)
│   └── NotesContext.tsx # Контекст заметок (CRUD операции, поиск)
│
├── db/                  # Работа с базой данных
│   └── database.ts      # Настройка Dexie (IndexedDB)
│
├── types/               # TypeScript типы и интерфейсы
│   └── index.ts         # Определения типов Note и User
│
├── App.tsx              # Главный компонент с роутингом
├── main.tsx             # Точка входа приложения
└── index.css            # Глобальные стили

dist/                    # Собранная версия приложения (генерируется при build)
```

### Архитектура и взаимодействие компонентов:

1. **Роутинг** (`App.tsx`):
   - Защищенные маршруты через `PrivateRoute` и `PublicRoute`
   - `/login` - страница авторизации
   - `/` - основное приложение с заметками

2. **Управление состоянием**:
   - `AuthContext` - управляет состоянием авторизации, хранит текущего пользователя
   - `NotesContext` - управляет заметками, поиском, выбранной заметкой
   - Оба контекста используют IndexedDB через Dexie для персистентности данных

3. **Компоненты**:
   - `Sidebar` - отображает список заметок, поиск, кнопку создания новой заметки
   - `Workspace` - область для просмотра и редактирования выбранной заметки
   - `TiptapEditor` - WYSIWYG-редактор с панелью инструментов форматирования

4. **Хранение данных**:
   - IndexedDB через Dexie для хранения заметок и пользователей
   - Данные сохраняются локально в браузере
   - Автоматическое сохранение при редактировании

## Как запустить / использовать / тестировать

### Предварительные требования:

- Node.js версии 20.19+ или 22.12+
- npm или yarn

### Установка зависимостей:

```bash
npm install
```

### Запуск в режиме разработки:

```bash
npm run dev
```

Приложение будет доступно по адресу `http://localhost:5173` (или другому порту, если 5173 занят).

### Сборка для продакшена:

```bash
npm run build
```

Собранное приложение будет в папке `dist/`.

### Просмотр собранной версии:

```bash
npm run preview
```

### Инструкции для проверки:

1. **Тестирование авторизации**:
   - Откройте приложение в браузере
   - Вы увидите страницу входа
   - Зарегистрируйте нового пользователя (вкладка "Регистрация")
   - Войдите с созданными учетными данными

2. **Тестирование заметок**:
   - После входа вы увидите интерфейс с боковой панелью
   - Нажмите "Новая заметка" для создания заметки
   - Выберите заметку из списка для просмотра
   - Нажмите кнопку редактирования (иконка карандаша)
   - Используйте панель инструментов для форматирования текста
   - Изменения сохраняются автоматически через 1 секунду

3. **Тестирование поиска**:
   - Введите текст в поле поиска
   - Список заметок фильтруется в реальном времени
   - Поиск работает по частичному вхождению

4. **Тестирование удаления**:
   - Выберите заметку
   - Нажмите кнопку удаления (иконка корзины)
   - Подтвердите удаление в модальном окне

5. **Тестирование PWA**:
   - Откройте DevTools (F12)
   - Перейдите в Application > Service Workers
   - Убедитесь, что Service Worker зарегистрирован
   - Отключите интернет и проверьте работу приложения офлайн

## Важные детали

### Технологический стек:

- **React 19** - UI библиотека
- **TypeScript** - типизация кода
- **Vite** - сборщик и dev-сервер
- **Material UI (MUI)** - компоненты интерфейса
- **React Router** - маршрутизация
- **Dexie** - обертка над IndexedDB
- **Tiptap** - WYSIWYG-редактор
- **Vite PWA Plugin** - поддержка PWA

### Особенности реализации:

1. **Автосохранение**:
   - Используется debounce (1 секунда) для оптимизации записей в БД
   - Изменения сохраняются автоматически при редактировании
   - При выходе из режима редактирования сохраняются все несохраненные изменения

2. **Безопасность**:
   - Пароли хранятся в открытом виде (для учебного проекта)
   - В продакшене необходимо использовать хеширование паролей

3. **Производительность**:
   - Локальное хранение данных обеспечивает быстрый доступ
   - Контексты оптимизированы для минимизации ре-рендеров
   - Использование useRef для таймеров автосохранения

4. **Типизация**:
   - Все компоненты полностью типизированы
   - Использование type-only импортов для соответствия настройкам TypeScript

5. **PWA**:
   - Service Worker регистрируется автоматически
   - Кэшируются все статические ресурсы
   - Приложение работает офлайн после первой загрузки

### Известные ограничения:

- Пароли не хешируются (только для учебных целей)
- Нет синхронизации между устройствами
- Нет экспорта/импорта заметок
- Ограниченная палитра цветов текста (можно расширить)

### Возможные улучшения:

- Добавление тегов/категорий для заметок
- Экспорт заметок в различные форматы
- Темная тема
- Расширенная палитра цветов
- Добавление изображений в заметки
- Синхронизация с облачным хранилищем
- Хеширование паролей
- Восстановление пароля
